<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earth and Proxima b Simulation</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
        #distance {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 20px;
            z-index: 100;
        }
        #instructions {
            position: absolute;
            top: 100px;
            left: 15%;
            transform: translateX(-50%);
            color: white;
            font-size: 18px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.5); /* Slightly transparent background */
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <!-- Distance display -->
    <div id="distance">Distance: Calculating...</div>
    <!-- Instructions for interaction -->
    <div id="instructions">
        <b>Instructions</b><br>
        Use the mouse to look around.<br> Scroll to zoom in and out!
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

    <script>
        // Initialize the scene, camera, and renderer
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 10000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Add lighting
        const directionalLight = new THREE.DirectionalLight(0xffffff, 10);
        directionalLight.position.set(0, 0, 2).normalize();
        scene.add(directionalLight);

        // Add a point light to simulate sun's light at the center
        const pointLight = new THREE.PointLight(0xffff00, 1, 90);
        pointLight.position.set(0, 0, 0);  // Light at the center (where the sun will be)
        scene.add(pointLight);

        // Variables for elliptical motion (Earth)
        let angle = 0;
        const a = 200;  // Semi-major axis for Earth (in scene units)
        const b = 150;  // Adjusted semi-minor axis for Earth's elliptical orbit
        const orbitalSpeed = 0.01;  // Earth's revolution speed (adjust as needed)
        let earthModel;  // Earth model
        let sunModel;    // Sun model

        // Variables for Proxima b
        let proximaAngle = 0;
        const proximaA = 1000;  // Distance for Proxima b
        const proximaSpeed = 0.0001;  // Slower revolution for Proxima b
        let proximaModel;  // Proxima b model

        // Load the GLTF sun model and position it at the center (0, 0, 0)
        const loader = new THREE.GLTFLoader();
        loader.load('sun/scene.gltf', function (gltf) {
            sunModel = gltf.scene;
            sunModel.position.set(0, 0, 0);  // Center of the scene
            sunModel.scale.set(7, 7, 7);
            scene.add(sunModel);
        }, undefined, function (error) {
            console.error(error);
        });

        // Load the GLTF Earth model and scale it up
        loader.load('earth/self made Earth.gltf', function (gltf) {
            earthModel = gltf.scene;
            earthModel.scale.set(20, 20, 20);  // Scale Earth up to make it larger
            scene.add(earthModel);
            animate();  // Start the animation after the model is loaded
        }, undefined, function (error) {
            console.error(error);
        });

        // Load the GLTF Proxima b model and scale it down further
        loader.load('Proxima_b_1_13776.gltf', function (gltf) {
            proximaModel = gltf.scene;
            proximaModel.scale.set(0.1, 0.1, 0.1); // Reduce the scale of Proxima b
            scene.add(proximaModel);
        }, undefined, function (error) {
            console.error(error);
        });

        // Set camera position
        camera.position.z = 1000;

        // Add orbit controls for 3D movement
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableZoom = true;  // Enable zooming
        controls.enablePan = true;   // Enable panning (moving sideways or up/down)
        controls.enableRotate = true; // Enable rotation around the scene
        controls.update();  // Ensure controls are updated every frame

        // Update the distance display
        function updateDistance() {
            if (earthModel && proximaModel) {
                // Distance between Earth and Sun in real life
                const earthSunDistance = 149.6;  // million kilometers

                // Distance between Earth and Proxima b in real life
                const earthProximaDistance = 40_000;  // million kilometers (approx. 4.24 light years)

                // Display the real-world distance in kilometers
                document.getElementById('distance').innerHTML = `Earth-Sun: ${earthSunDistance} million km | Earth-Proxima b: ${earthProximaDistance} million km`;
            }
        }

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            // Rotate the sun on its own axis
            if (sunModel) {
                sunModel.rotation.y += 0.01;  // Adjust this value to change the rotation speed of the sun
            }

            // Move the Earth model in an elliptical motion around the sun
            if (earthModel) {
                angle += orbitalSpeed;  // Speed of the circular motion
                earthModel.position.x = a * Math.cos(angle);
                earthModel.position.z = b * Math.sin(angle);
                earthModel.rotation.y += 0.01;  // Rotate the Earth around its Y axis

                // Update the distance display
                updateDistance();
            }

            // Move Proxima b in a circular orbit far away
            if (proximaModel) {
                proximaAngle += proximaSpeed;  // Proxima b has a slower orbit
                proximaModel.position.x = proximaA * Math.cos(proximaAngle);
                proximaModel.position.z = proximaA * Math.sin(proximaAngle);
                proximaModel.rotation.y += 0.001;  // Proxima b's own rotation (slower than Earth's)
            }

            // Update controls
            controls.update();  // Update OrbitControls with any camera changes

            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', function() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
